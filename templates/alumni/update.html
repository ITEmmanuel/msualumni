{% extends 'shared/base.html' %}
{% load static %}

{% block title %}Update Alumni Details{% endblock %}

{% block extra_css %}
<style>
    :root { --msu-blue:#1e88e5; --msu-blue-dark:#1565c0; --msu-yellow:#ffd600; }
    .tab-active{ border-color: var(--msu-blue) var(--msu-blue) white; color:var(--msu-blue); }
    .form-card{background:white;border-radius:0.5rem;box-shadow:0 4px 6px -1px rgba(0,0,0,.1);border-left:4px solid var(--msu-blue);}    
    .btn-primary{background:var(--msu-blue);color:#fff;font-weight:600;padding:0.75rem 1.5rem;border-radius:0.375rem;box-shadow:0 1px 2px rgba(0,0,0,.05);transition:background-color .2s ease-in-out;}
    .btn-primary:hover{background:var(--msu-blue-dark);}
    .btn-primary:disabled{opacity:.5;cursor:not-allowed;}
</style>
{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto py-10 px-4">
    <div class="form-card">
        <div class="px-6 pt-4">
            <ul class="flex border-b" id="update-tabs">
                <li class="-mb-px mr-4"><a data-tab="quick" href="#" class="tab-link tab-active inline-block py-2 px-4 font-semibold">Quick Update</a></li>
                <li class="mr-4"><a data-tab="full" href="#" class="tab-link inline-block py-2 px-4 font-semibold text-gray-600">Full Update</a></li>
            </ul>
        </div>
        <div class="p-6 space-y-8">
            <!-- QUICK UPDATE FORM -->
            <form id="quick-form" method="post" enctype="multipart/form-data" class="space-y-6" action="">{% csrf_token %}
                <input type="hidden" name="update_type" value="quick">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1" for="national_id_q">National ID / Passport<span class="text-red-600">*</span></label>
                    <input id="national_id_q" name="national_id" required type="text" class="w-full p-2 border border-gray-300 rounded-md focus:ring-msu-blue focus:border-msu-blue">
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div><label for="employment_status" class="block text-sm font-medium text-gray-700 mb-1">Employment Status</label>
                        <select name="employment_status" id="employment_status" class="w-full p-2 border border-gray-300 rounded-md"><option value="">-- Select --</option><option value="formally_employed">Formally Employed</option><option value="self_employed">Self-Employed</option><option value="other">Other</option></select></div>
                    <div><label class="block text-sm font-medium text-gray-700 mb-1" for="current_employer">Name of Organisation</label><input id="current_employer" name="current_employer" type="text" class="w-full p-2 border border-gray-300 rounded-md"></div>
                    <div><label class="block text-sm font-medium text-gray-700 mb-1" for="job_title">Designation</label><input id="job_title" name="job_title" type="text" class="w-full p-2 border border-gray-300 rounded-md"></div>
                    <div><label class="block text-sm font-medium text-gray-700 mb-1" for="industry">Industry</label><input id="industry" name="industry" type="text" class="w-full p-2 border border-gray-300 rounded-md"></div>
                    <div><label class="block text-sm font-medium text-gray-700 mb-1" for="email">Email</label><input id="email" name="email" type="email" class="w-full p-2 border border-gray-300 rounded-md"></div>
                    <div><label class="block text-sm font-medium text-gray-700 mb-1" for="mobile_number">Mobile Number</label><input id="mobile_number" name="mobile_number" type="text" class="w-full p-2 border border-gray-300 rounded-md"></div>
                    <div><label class="block text-sm font-medium text-gray-700 mb-1" for="city">City</label><input id="city" name="city" type="text" class="w-full p-2 border border-gray-300 rounded-md"></div>
                    <div><label class="block text-sm font-medium text-gray-700 mb-1" for="country">Country</label><input id="country" name="country" type="text" class="w-full p-2 border border-gray-300 rounded-md"></div>
                </div>
                <div><label for="bio" class="block text-sm font-medium text-gray-700 mb-1">Short Bio</label><textarea id="bio" name="bio" rows="3" class="w-full p-2 border border-gray-300 rounded-md"></textarea></div>
                <div><label for="profile_picture" class="block text-sm font-medium text-gray-700 mb-1">Profile Picture</label><input type="file" id="profile_picture" name="profile_picture" class="w-full p-2 border border-gray-300 rounded-md"></div>
                <button type="submit" class="btn-primary w-full">Submit Quick Update</button>
            </form>

            <!-- FULL UPDATE FORM -->
            <form id="full-form" method="post" enctype="multipart/form-data" class="space-y-6 hidden" action="">{% csrf_token %}
                <input type="hidden" name="update_type" value="full">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    {% for field in full_form.visible_fields %}
                        <div class="{% if field.field.widget.input_type == 'checkbox' %}md:col-span-2 flex items-center space-x-2{% endif %}">
                            {% if field.label %}
                                <label class="block text-sm font-medium text-gray-700 mb-1" for="{{ field.id_for_label }}">{{ field.label }}{% if field.field.required %}<span class="text-red-600">*</span>{% endif %}</label>
                            {% endif %}
                            {{ field }}
                            {% for error in field.errors %}
                                <p class="text-red-600 text-xs">{{ error }}</p>
                            {% endfor %}
                        </div>
                    {% endfor %}
                </div>
                <button type="submit" class="btn-primary w-full">Submit Full Update</button>
            </form>
        </div>
    </div>
</div>

<script>
    const links=document.querySelectorAll('.tab-link');
    const quickForm=document.getElementById('quick-form');
    const fullForm=document.getElementById('full-form');
    links.forEach(l=>l.addEventListener('click',e=>{e.preventDefault();links.forEach(a=>a.classList.remove('tab-active','text-msu-blue'));l.classList.add('tab-active');if(l.dataset.tab==='quick'){quickForm.classList.remove('hidden');fullForm.classList.add('hidden');}else{fullForm.classList.remove('hidden');quickForm.classList.add('hidden');}}));
</script>
{% endblock %}
