{% extends 'shared/base.html' %}
{% load static %}

{% block title %}{{ event.title }} - MSU IARO{% endblock %}

{% block content %}
<div class="container mx-auto px-4">
    <div class="mb-6">
        <a href="{% url 'alumni:events' %}" class="text-msu-blue hover:underline">‚Üê Back to Events</a>
    </div>
    
    <div class="bg-white rounded-lg shadow-lg overflow-hidden">
        {% if event.image %}
        <div class="h-64 overflow-hidden">
            <img src="{{ event.image.url }}" alt="{{ event.title }}" class="w-full h-full object-cover">
        </div>
        {% endif %}
        
        <div class="p-6 lg:p-8">
            <div class="flex flex-wrap justify-between items-start mb-6">
                <div>
                    <h1 class="text-3xl font-bold text-msu-blue">{{ event.title }}</h1>
                    <p class="text-gray-600 mt-2">{{ event.date|date:"F d, Y" }} at {{ event.date|date:"g:i A" }}</p>
                </div>
                
                <div class="mt-4 md:mt-0">
                    {% if event.is_virtual %}
                    <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium mr-2">Virtual Event</span>
                    {% endif %}
                    
                    {% if event.date >= now %}
                    <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">Upcoming</span>
                    {% else %}
                    <span class="bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-sm font-medium">Past Event</span>
                    {% endif %}
                </div>
            </div>
            
            <div class="prose lg:prose-lg max-w-none mb-8">
                <p><strong>Location:</strong> {{ event.location }}</p>
                
                <div class="mt-4">
                    {{ event.description|linebreaks }}
                </div>
            </div>
            
            {% if event.is_virtual and event.virtual_link %}
            <div class="mb-8 p-4 bg-blue-50 rounded-lg">
                <h2 class="font-bold text-lg mb-2">Virtual Event Link</h2>
                <p>This is a virtual event. Use the link below to join:</p>
                <a href="{{ event.virtual_link }}" target="_blank" class="text-blue-600 hover:underline break-all">{{ event.virtual_link }}</a>
            </div>
            {% endif %}
            
            {% if event.registration_required and event.date >= now %}
            <div class="bg-gray-50 p-6 rounded-lg">
                <h2 class="font-bold text-lg mb-4">Registration Required</h2>
                <p class="mb-4">This event requires registration. Please register to attend.</p>
                
                <button id="register-btn" class="btn-msu-blue">Register for Event</button>
                
                <div id="registration-form" class="hidden mt-4 p-4 border rounded-lg">
                    <form method="post" action="#" class="space-y-4">
                        {% csrf_token %}
                        <div>
                            <label for="full_name" class="block text-gray-700 font-medium mb-2">Full Name</label>
                            <input type="text" id="full_name" name="full_name" required class="w-full p-2 border border-gray-300 rounded-md">
                        </div>
                        <div>
                            <label for="email" class="block text-gray-700 font-medium mb-2">Email</label>
                            <input type="email" id="email" name="email" required class="w-full p-2 border border-gray-300 rounded-md">
                        </div>
                        <div>
                            <label for="reg_number" class="block text-gray-700 font-medium mb-2">Registration Number</label>
                            <input type="text" id="reg_number" name="reg_number" required class="w-full p-2 border border-gray-300 rounded-md">
                        </div>
                        <div>
                            <button type="submit" class="btn-msu-blue">Submit Registration</button>
                        </div>
                    </form>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</div>

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const registerBtn = document.getElementById('register-btn');
        const registrationForm = document.getElementById('registration-form');
        
        if(registerBtn) {
            registerBtn.addEventListener('click', function() {
                registrationForm.classList.toggle('hidden');
            });
        }
    });
</script>
{% endblock %}

{% endblock %}